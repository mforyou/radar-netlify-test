<script>
// ðŸ‘‰ WSTAWIONY NOWY URL API
const API_URL = "hhttps://script.google.com/macros/s/AKfycbw4EJ-biMC9xazHefmhkBB0sdSuAm4hyIO_Q0blUu6X_3ZocOV9wX1JYbjiVGbqfgrquA/exec";

// Pobieranie danych
async function fetchData() {
  try {
    const url = API_URL + "?_=" + Date.now(); // anty-cache
    const res = await fetch(url, {
      cache: "no-store",
      headers: { "cache-control": "no-cache" }
    });

    if (!res.ok) throw new Error("HTTP " + res.status);

    const data = await res.json();
    renderTable(data);

    document.getElementById("update-time").innerText =
      "Ostatnia aktualizacja: " + new Date().toLocaleString();

  } catch (error) {
    console.error(error);
    document.getElementById("data-table").innerHTML =
      `<tr><td colspan="7" style="color:red">BÅ‚Ä…d pobierania danych: ${error.message}</td></tr>`;
  }
}

// Rysowanie tabeli
function renderTable(data) {
  const table = document.getElementById("data-table");
  table.innerHTML = "";

  if (!data || data.length === 0) {
    table.innerHTML = `<tr><td colspan="7">Brak danych...</td></tr>`;
    return;
  }

  data.forEach(row => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${row.date || ""}</td>
      <td>${row.league || ""}</td>
      <td>${row.home || ""}</td>
      <td>${row.away || ""}</td>
      <td>${row.typ || ""}</td>
      <td>${row.prob || ""}</td>
      <td>${row.status || ""}</td>
    `;
    table.appendChild(tr);
  });
}

// Start
window.onload = fetchData;
</script>
